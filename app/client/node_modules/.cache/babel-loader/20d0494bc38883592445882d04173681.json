{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Weilin\\\\Documents\\\\GitHub\\\\UrbanTreeConservation\\\\client\\\\src\\\\js\\\\components\\\\DrawAnalysisNative.js\",\n    _s = $RefreshSig$();\n\nimport { useSelector } from \"react-redux\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport Grid from '@material-ui/core/Grid';\nconst useStyles = makeStyles(theme => ({\n  analysisMargin: {\n    margin: theme.spacing(1),\n    top: theme.spacing(7),\n    right: theme.spacing(1),\n    position: 'fixed',\n    zIndex: 1000,\n    width: 250,\n    padding: theme.spacing(1)\n  }\n})); // Custom map components\n\nconst DrawAnalysisNative = () => {\n  _s();\n\n  const stateMarker = useSelector(state => state.marker);\n  const classes = useStyles();\n  let freedata;\n  let freetotal;\n  let countFreeNonNative;\n  let countFreeNative;\n  let freespeciescount = [];\n  let citydata;\n  let citytotal;\n  let countCityNonNative;\n  let countCityNative;\n  let cityspeciescount = [];\n  let citymarks;\n  let freemarks;\n\n  if (stateMarker.freedraw.length > 0 || stateMarker.view_status === \"city\" && stateMarker.city.length > 0) {\n    //get native data\n    if (stateMarker.freedraw.length > 0) {\n      freedata = stateMarker.freedraw;\n      freetotal = freedata.length;\n      let tmpfreespeciescount = freedata.reduce((p, c) => {\n        var species = c.scientific_name;\n\n        if (!p.hasOwnProperty(species)) {\n          p[species] = 0;\n        }\n\n        p[species]++;\n        return p;\n      }, {});\n\n      for (var species in tmpfreespeciescount) {\n        freespeciescount.push([species, tmpfreespeciescount[species]]);\n      }\n\n      freespeciescount.sort(function (a, b) {\n        return b[1] - a[1];\n      });\n      countFreeNonNative = freedata.reduce((cnt, row) => {\n        if (row.native === \"FALSE\") {\n          return cnt = cnt + 1;\n        } else {\n          return cnt;\n        }\n      }, 0);\n      countFreeNative = freedata.reduce((cnt, row) => {\n        if (row.native === \"TRUE\") {\n          return cnt = cnt + 1;\n        } else {\n          return cnt;\n        }\n      }, 0);\n    }\n\n    if (stateMarker.city.length > 0) {\n      citydata = stateMarker.global.filter(function (el) {\n        return el.city === stateMarker.city[0].city && el.state === stateMarker.city[0].state;\n      });\n      let tmpcityspeciescount = stateMarker.city.reduce((p, c) => {\n        var species = c.scientific_name;\n\n        if (!p.hasOwnProperty(species)) {\n          p[species] = 0;\n        }\n\n        p[species]++;\n        return p;\n      }, {});\n\n      for (var species in tmpcityspeciescount) {\n        cityspeciescount.push([species, tmpcityspeciescount[species]]);\n      }\n\n      cityspeciescount.sort(function (a, b) {\n        return b[1] - a[1];\n      });\n      citytotal = citydata[0].total_species;\n      countCityNonNative = citydata[0].count_non_native;\n      countCityNative = citydata[0].count_native;\n    }\n\n    citymarks = [{\n      value: countCityNative,\n      label: 'Native'\n    }, {\n      value: citytotal,\n      label: (citytotal / 1000).toFixed() + \"K\"\n    }];\n    freemarks = [{\n      value: countFreeNative,\n      label: 'Native'\n    }, {\n      value: freetotal,\n      label: freetotal\n    }];\n  }\n\n  if (stateMarker.freedraw.length > 0 && stateMarker.city.length > 0) {\n    return /*#__PURE__*/_jsxDEV(Paper, {\n      className: classes.analysisMargin,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        justify: \"center\",\n        alignItems: \"center\",\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          align: \"center\",\n          xs: 10,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            children: \"City Native Distribution\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            pb: 5\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Slider, {\n            defaultValue: countCityNative,\n            valueLabelDisplay: \"on\",\n            step: null,\n            min: 0,\n            max: citytotal,\n            marks: citymarks\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: cityspeciescount.map(function (name, index) {\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [name[0], \": \", name[1]]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 40\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          align: \"center\",\n          xs: 10,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            children: \"Freedraw Native Distribution\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            pb: 5\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Slider, {\n            defaultValue: countFreeNative,\n            valueLabelDisplay: \"on\",\n            step: null,\n            min: 0,\n            max: freetotal,\n            marks: freemarks\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this);\n  } else if (stateMarker.freedraw.length == 0 && stateMarker.city.length > 0) {\n    return /*#__PURE__*/_jsxDEV(Paper, {\n      className: classes.analysisMargin,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        justify: \"center\",\n        alignItems: \"center\",\n        spacing: 2,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          align: \"center\",\n          xs: 10,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            children: \"City Native Distribution\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            pb: 5\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Slider, {\n            defaultValue: countCityNative,\n            valueLabelDisplay: \"on\",\n            step: null,\n            min: 0,\n            max: citytotal,\n            marks: citymarks\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }, this);\n  } else {\n    return null;\n  }\n};\n\n_s(DrawAnalysisNative, \"KoC7UnmzeHDooJFsA0LaXCtNe6w=\", false, function () {\n  return [useSelector, useStyles];\n});\n\n_c = DrawAnalysisNative;\nexport default DrawAnalysisNative;\n\nvar _c;\n\n$RefreshReg$(_c, \"DrawAnalysisNative\");","map":{"version":3,"sources":["C:/Users/Weilin/Documents/GitHub/UrbanTreeConservation/client/src/js/components/DrawAnalysisNative.js"],"names":["useSelector","makeStyles","Paper","Box","Typography","Slider","Grid","useStyles","theme","analysisMargin","margin","spacing","top","right","position","zIndex","width","padding","DrawAnalysisNative","stateMarker","state","marker","classes","freedata","freetotal","countFreeNonNative","countFreeNative","freespeciescount","citydata","citytotal","countCityNonNative","countCityNative","cityspeciescount","citymarks","freemarks","freedraw","length","view_status","city","tmpfreespeciescount","reduce","p","c","species","scientific_name","hasOwnProperty","push","sort","a","b","cnt","row","native","global","filter","el","tmpcityspeciescount","total_species","count_non_native","count_native","value","label","toFixed","map","name","index"],"mappings":"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","sourcesContent":["import { useSelector } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  analysisMargin: {\r\n    margin: theme.spacing(1),\r\n    top: theme.spacing(7),\r\n    right: theme.spacing(1),\r\n    position: 'fixed',\r\n    zIndex: 1000,\r\n    width: 250,\r\n    padding: theme.spacing(1),\r\n  }\r\n}));\r\n\r\n// Custom map components\r\nconst DrawAnalysisNative = () => {\r\n    const stateMarker = useSelector(state => state.marker);\r\n    const classes = useStyles();\r\n    let freedata;\r\n    let freetotal;\r\n    let countFreeNonNative;\r\n    let countFreeNative;\r\n    let freespeciescount = [];\r\n\r\n    let citydata;\r\n    let citytotal;\r\n    let countCityNonNative;\r\n    let countCityNative;\r\n    let cityspeciescount = [];\r\n\r\n    let citymarks;\r\n    let freemarks;\r\n\r\n    if ((stateMarker.freedraw.length > 0) || (stateMarker.view_status === \"city\" && stateMarker.city.length > 0)) {\r\n\r\n        //get native data\r\n        if (stateMarker.freedraw.length > 0) {\r\n            freedata = stateMarker.freedraw;\r\n            freetotal = freedata.length;\r\n            let tmpfreespeciescount = freedata.reduce((p,c) => {\r\n                var species = c.scientific_name;\r\n                if (!p.hasOwnProperty(species)) {\r\n                    p[species] = 0;\r\n                }\r\n                p[species]++;\r\n                return p;\r\n            }, {});\r\n\r\n            for (var species in tmpfreespeciescount) {\r\n                freespeciescount.push([species, tmpfreespeciescount[species]])\r\n            }\r\n\r\n            freespeciescount.sort(function(a,b) {\r\n                return b[1] - a[1];\r\n            });\r\n\r\n\r\n            countFreeNonNative = freedata.reduce((cnt, row) => {\r\n                if (row.native === \"FALSE\") {\r\n                    return cnt = cnt+1;\r\n                } else {\r\n                    return cnt;\r\n                }\r\n            }, 0);\r\n\r\n            countFreeNative = freedata.reduce((cnt, row) => {\r\n                if (row.native === \"TRUE\") {\r\n                    return cnt = cnt+1;\r\n                } else {\r\n                    return cnt;\r\n                }\r\n            }, 0);\r\n        }\r\n\r\n        if (stateMarker.city.length > 0) {\r\n            citydata = stateMarker.global.filter(function (el) {\r\n              return el.city === stateMarker.city[0].city && el.state === stateMarker.city[0].state\r\n            });\r\n\r\n            let tmpcityspeciescount = stateMarker.city.reduce((p,c) => {\r\n                var species = c.scientific_name;\r\n                if (!p.hasOwnProperty(species)) {\r\n                    p[species] = 0;\r\n                }\r\n                p[species]++;\r\n                return p;\r\n            }, {});\r\n\r\n            for (var species in tmpcityspeciescount) {\r\n                cityspeciescount.push([species, tmpcityspeciescount[species]])\r\n            }\r\n\r\n            cityspeciescount.sort(function(a,b) {\r\n                return b[1] - a[1];\r\n            });\r\n\r\n            citytotal = citydata[0].total_species;\r\n            countCityNonNative = citydata[0].count_non_native;\r\n            countCityNative = citydata[0].count_native;\r\n        }\r\n\r\n        citymarks = [\r\n          {value: countCityNative,label: 'Native'},\r\n          {value: citytotal,label: (citytotal/1000).toFixed()+\"K\"},\r\n        ];\r\n\r\n        freemarks = [\r\n          {value: countFreeNative,label: 'Native'},\r\n          {value: freetotal,label: freetotal},\r\n        ];\r\n\r\n    }\r\n\r\n    if (stateMarker.freedraw.length > 0 && stateMarker.city.length > 0) {\r\n         return(\r\n            <Paper className={classes.analysisMargin}>\r\n                <Grid container justify=\"center\" alignItems=\"center\" spacing={2}>\r\n                    <Grid item align=\"center\" xs={10} >\r\n                        <Typography gutterBottom>City Native Distribution</Typography>\r\n                        <Box pb={5} />\r\n                        <Slider\r\n                            defaultValue={countCityNative}\r\n                            valueLabelDisplay=\"on\"\r\n                            step={null}\r\n                            min={0}\r\n                            max={citytotal}\r\n                            marks={citymarks}\r\n                        />\r\n                        <ul>\r\n                            {cityspeciescount.map(function(name, index) {\r\n                                return <li key={index}>{name[0]}: {name[1]}</li>\r\n                            })}\r\n                        </ul>\r\n                    </Grid>\r\n                    <Grid item align=\"center\" xs={10} >\r\n                        <Typography gutterBottom>Freedraw Native Distribution</Typography>\r\n                        <Box pb={5} />\r\n                        <Slider\r\n                            defaultValue={countFreeNative}\r\n                            valueLabelDisplay=\"on\"\r\n                            step={null}\r\n                            min={0}\r\n                            max={freetotal}\r\n                            marks={freemarks}\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n         )\r\n    } else if (stateMarker.freedraw.length == 0 && stateMarker.city.length > 0) {\r\n        return(\r\n            <Paper className={classes.analysisMargin}>\r\n                <Grid container justify=\"center\" alignItems=\"center\" spacing={2}>\r\n                    <Grid item align=\"center\" xs={10} >\r\n                        <Typography gutterBottom>City Native Distribution</Typography>\r\n                        <Box pb={5} />\r\n                        <Slider\r\n                            defaultValue={countCityNative}\r\n                            valueLabelDisplay=\"on\"\r\n                            step={null}\r\n                            min={0}\r\n                            max={citytotal}\r\n                            marks={citymarks}\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n        )\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n\r\nexport default DrawAnalysisNative;"]},"metadata":{},"sourceType":"module"}