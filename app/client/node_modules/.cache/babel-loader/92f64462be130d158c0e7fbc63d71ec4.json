{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}(); //leaflet\n//pixi-overlay\n\n\nvar _react = require('react');\n\nvar _leaflet = require('leaflet');\n\nvar _leaflet2 = _interopRequireDefault(_leaflet);\n\nvar _pixi = require('pixi.js');\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nrequire('leaflet-pixi-overlay');\n\nvar _useLeaflet = require('use-leaflet');\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nPIXI.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = false;\nPIXI.utils.skipHello();\nvar PIXILoader = PIXI.Loader.shared;\n\nvar PixiOverlay = function PixiOverlay(_ref) {\n  var markers = _ref.markers;\n\n  var _useState = (0, _react.useState)(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      openedPopupData = _useState2[0],\n      setOpenedPopupData = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      openedTooltipData = _useState4[0],\n      setOpenedTooltipData = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      openedPopup = _useState6[0],\n      setOpenedPopup = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      openedTooltip = _useState8[0],\n      setOpenedTooltip = _useState8[1];\n\n  var _useState9 = (0, _react.useState)(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      pixiOverlay = _useState10[0],\n      setPixiOverlay = _useState10[1];\n\n  var _useState11 = (0, _react.useState)(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loaded = _useState12[0],\n      setLoaded = _useState12[1];\n\n  var map = (0, _useLeaflet.useLeafletMap)(); // load sprites\n\n  (0, _react.useEffect)(function () {\n    var loadingAny = false;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = markers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var marker = _step.value;\n        var resolvedMarkerId = marker.iconId || marker.iconColor; // skip if no ID or already cached\n\n        if (!marker.iconColor && !marker.iconId || PIXILoader.resources['marker_' + resolvedMarkerId]) {\n          continue;\n        }\n\n        loadingAny = true;\n        PIXILoader.add('marker_' + resolvedMarkerId, marker.customIcon ? getEncodedIcon(marker.customIcon) : getDefaultIcon(marker.iconColor));\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    if (loaded && loadingAny) {\n      setLoaded(false);\n    }\n\n    if (loadingAny) {\n      PIXILoader.load(function () {\n        return setLoaded(true);\n      });\n    } else {\n      setLoaded(true);\n    }\n  }, [markers]); // load pixi when map changes\n\n  (0, _react.useEffect)(function () {\n    var pixiContainer = new PIXI.Container();\n\n    var overlay = _leaflet2.default.pixiOverlay(function (utils) {\n      // redraw markers\n      var scale = utils.getScale();\n      utils.getContainer().children.forEach(function (child) {\n        return child.scale.set(1 / scale);\n      });\n      utils.getRenderer().render(utils.getContainer());\n    }, pixiContainer);\n\n    overlay.addTo(map);\n    setPixiOverlay(overlay);\n    setOpenedPopupData(null);\n    setOpenedTooltipData(null);\n    return function () {\n      return pixiContainer.removeChildren();\n    };\n  }, [map]); // draw markers first time in new container\n\n  (0, _react.useEffect)(function () {\n    if (pixiOverlay && markers && loaded) {\n      var utils = pixiOverlay.utils;\n      var container = utils.getContainer();\n      var renderer = utils.getRenderer();\n      var project = utils.latLngToLayerPoint;\n      var scale = utils.getScale();\n      markers.forEach(function (marker) {\n        var id = marker.id,\n            iconColor = marker.iconColor,\n            iconId = marker.iconId,\n            onClick = marker.onClick,\n            position = marker.position,\n            popup = marker.popup,\n            tooltip = marker.tooltip,\n            popupOpen = marker.popupOpen,\n            markerSpriteAnchor = marker.markerSpriteAnchor;\n        var resolvedIconId = iconId || iconColor;\n\n        if (!PIXILoader.resources['marker_' + resolvedIconId] || !PIXILoader.resources['marker_' + resolvedIconId].texture) {\n          return;\n        }\n\n        var markerTexture = PIXILoader.resources['marker_' + resolvedIconId].texture; //const markerTexture = new PIXI.Texture.fromImage(url);\n\n        markerTexture.anchor = {\n          x: 0.5,\n          y: 1\n        };\n        var markerSprite = PIXI.Sprite.from(markerTexture);\n\n        if (markerSpriteAnchor) {\n          markerSprite.anchor.set(markerSpriteAnchor[0], markerSpriteAnchor[1]);\n        } else {\n          markerSprite.anchor.set(0.5, 1);\n        }\n\n        var markerCoords = project(position);\n        markerSprite.x = markerCoords.x;\n        markerSprite.y = markerCoords.y;\n        markerSprite.scale.set(1 / scale);\n\n        if (popupOpen) {\n          setOpenedPopupData({\n            id: id,\n            offset: [0, -35],\n            position: position,\n            content: popup,\n            onClick: onClick\n          });\n        }\n\n        if (popup || onClick || tooltip) {\n          markerSprite.interactive = true;\n        }\n\n        if (popup || onClick) {\n          markerSprite.on('click', function () {\n            if (onClick) {\n              onClick(id);\n            }\n          });\n          markerSprite.defaultCursor = 'pointer';\n          markerSprite.buttonMode = true;\n        }\n\n        if (tooltip) {\n          markerSprite.on('mouseover', function () {\n            setOpenedTooltipData({\n              id: id,\n              offset: [0, -35],\n              position: position,\n              content: tooltip\n            });\n          });\n          markerSprite.on('mouseout', function () {\n            setOpenedTooltipData(null);\n          });\n        }\n\n        container.addChild(markerSprite);\n      });\n      renderer.render(container);\n    }\n\n    return function () {\n      return pixiOverlay && pixiOverlay.utils.getContainer().removeChildren();\n    };\n  }, [pixiOverlay, markers, loaded]); // handle tooltip\n\n  (0, _react.useEffect)(function () {\n    if (openedTooltip) {\n      map.closePopup(openedTooltip);\n    }\n\n    if (openedTooltipData && (!openedPopup || !openedPopupData || openedPopupData.id !== openedTooltipData.id)) {\n      setOpenedTooltip(openPopup(map, openedTooltipData));\n    } // we don't want to reload when openedTooltip changes as we'd get a loop\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [openedTooltipData, openedPopupData, map]); // handle popup\n\n  (0, _react.useEffect)(function () {\n    // close only if different popup\n    if (openedPopup) {\n      map.closePopup(openedPopup);\n    } // open only if new popup\n\n\n    if (openedPopupData) {\n      setOpenedPopup(openPopup(map, openedPopupData, {\n        autoClose: false\n      }, true));\n    } // we don't want to reload when whenedPopup changes as we'd get a loop\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [openedPopupData, map]);\n  return null;\n};\n\nfunction openPopup(map, data) {\n  var extraOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var isPopup = arguments[3];\n\n  var popup = _leaflet2.default.popup(Object.assign({\n    offset: data.offset\n  }, extraOptions)).setLatLng(data.position).setContent(data.content).openOn(map); // TODO don't call onClick if opened a new one\n\n\n  if (isPopup && data.onClick) {\n    popup.on('remove', function () {\n      data.onClick(null);\n    });\n  }\n\n  return popup;\n}\n\nfunction getDefaultIcon(color) {\n  var svgIcon = '<svg style=\"-webkit-filter: drop-shadow( 1px 1px 1px rgba(0, 0, 0, .4));filter: drop-shadow( 1px 1px 1px rgba(0, 0, 0, .4));\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"' + color + '\" width=\"36\" height=\"36\" viewBox=\"0 0 24 24\"><path d=\"M12 0c-4.198 0-8 3.403-8 7.602 0 6.243 6.377 6.903 8 16.398 1.623-9.495 8-10.155 8-16.398 0-4.199-3.801-7.602-8-7.602zm0 11c-1.657 0-3-1.343-3-3s1.342-3 3-3 3 1.343 3 3-1.343 3-3 3z\"/></svg>';\n  return getEncodedIcon(svgIcon);\n}\n\nfunction getEncodedIcon(svg) {\n  var decoded = unescape(encodeURIComponent(svg));\n  var base64 = btoa(decoded);\n  return 'data:image/svg+xml;base64,' + base64;\n}\n\nexports.default = PixiOverlay;","map":{"version":3,"sources":["C:/Users/Weilin/Documents/GitHub/InsectTrade/app/client/node_modules/react-leaflet-pixi-overlay/build/PixiOverlay.js"],"names":["Object","defineProperty","exports","value","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","_react","require","_leaflet","_leaflet2","_interopRequireDefault","_pixi","PIXI","_interopRequireWildcard","_useLeaflet","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","default","settings","FAIL_IF_MAJOR_PERFORMANCE_CAVEAT","utils","skipHello","PIXILoader","Loader","shared","PixiOverlay","_ref","markers","_useState","useState","_useState2","openedPopupData","setOpenedPopupData","_useState3","_useState4","openedTooltipData","setOpenedTooltipData","_useState5","_useState6","openedPopup","setOpenedPopup","_useState7","_useState8","openedTooltip","setOpenedTooltip","_useState9","_useState10","pixiOverlay","setPixiOverlay","_useState11","_useState12","loaded","setLoaded","map","useLeafletMap","useEffect","loadingAny","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","marker","resolvedMarkerId","iconId","iconColor","resources","add","customIcon","getEncodedIcon","getDefaultIcon","return","load","pixiContainer","Container","overlay","scale","getScale","getContainer","children","forEach","child","set","getRenderer","render","addTo","removeChildren","container","renderer","project","latLngToLayerPoint","id","onClick","position","popup","tooltip","popupOpen","markerSpriteAnchor","resolvedIconId","texture","markerTexture","anchor","x","y","markerSprite","Sprite","from","markerCoords","offset","content","interactive","on","defaultCursor","buttonMode","addChild","closePopup","openPopup","autoClose","data","extraOptions","arguments","isPopup","assign","setLatLng","setContent","openOn","color","svgIcon","svg","decoded","unescape","encodeURIComponent","base64","btoa"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n//leaflet\n\n\n//pixi-overlay\n\n\nvar _react = require('react');\n\nvar _leaflet = require('leaflet');\n\nvar _leaflet2 = _interopRequireDefault(_leaflet);\n\nvar _pixi = require('pixi.js');\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nrequire('leaflet-pixi-overlay');\n\nvar _useLeaflet = require('use-leaflet');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nPIXI.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = false;\nPIXI.utils.skipHello();\nvar PIXILoader = PIXI.Loader.shared;\n\nvar PixiOverlay = function PixiOverlay(_ref) {\n\tvar markers = _ref.markers;\n\n\tvar _useState = (0, _react.useState)(null),\n\t    _useState2 = _slicedToArray(_useState, 2),\n\t    openedPopupData = _useState2[0],\n\t    setOpenedPopupData = _useState2[1];\n\n\tvar _useState3 = (0, _react.useState)(null),\n\t    _useState4 = _slicedToArray(_useState3, 2),\n\t    openedTooltipData = _useState4[0],\n\t    setOpenedTooltipData = _useState4[1];\n\n\tvar _useState5 = (0, _react.useState)(null),\n\t    _useState6 = _slicedToArray(_useState5, 2),\n\t    openedPopup = _useState6[0],\n\t    setOpenedPopup = _useState6[1];\n\n\tvar _useState7 = (0, _react.useState)(null),\n\t    _useState8 = _slicedToArray(_useState7, 2),\n\t    openedTooltip = _useState8[0],\n\t    setOpenedTooltip = _useState8[1];\n\n\tvar _useState9 = (0, _react.useState)(null),\n\t    _useState10 = _slicedToArray(_useState9, 2),\n\t    pixiOverlay = _useState10[0],\n\t    setPixiOverlay = _useState10[1];\n\n\tvar _useState11 = (0, _react.useState)(false),\n\t    _useState12 = _slicedToArray(_useState11, 2),\n\t    loaded = _useState12[0],\n\t    setLoaded = _useState12[1];\n\n\tvar map = (0, _useLeaflet.useLeafletMap)();\n\n\t// load sprites\n\t(0, _react.useEffect)(function () {\n\t\tvar loadingAny = false;\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = markers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar marker = _step.value;\n\n\t\t\t\tvar resolvedMarkerId = marker.iconId || marker.iconColor;\n\n\t\t\t\t// skip if no ID or already cached\n\t\t\t\tif (!marker.iconColor && !marker.iconId || PIXILoader.resources['marker_' + resolvedMarkerId]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tloadingAny = true;\n\t\t\t\tPIXILoader.add('marker_' + resolvedMarkerId, marker.customIcon ? getEncodedIcon(marker.customIcon) : getDefaultIcon(marker.iconColor));\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t_iterator.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (loaded && loadingAny) {\n\t\t\tsetLoaded(false);\n\t\t}\n\n\t\tif (loadingAny) {\n\t\t\tPIXILoader.load(function () {\n\t\t\t\treturn setLoaded(true);\n\t\t\t});\n\t\t} else {\n\t\t\tsetLoaded(true);\n\t\t}\n\t}, [markers]);\n\n\t// load pixi when map changes\n\t(0, _react.useEffect)(function () {\n\t\tvar pixiContainer = new PIXI.Container();\n\t\tvar overlay = _leaflet2.default.pixiOverlay(function (utils) {\n\t\t\t// redraw markers\n\t\t\tvar scale = utils.getScale();\n\t\t\tutils.getContainer().children.forEach(function (child) {\n\t\t\t\treturn child.scale.set(1 / scale);\n\t\t\t});\n\n\t\t\tutils.getRenderer().render(utils.getContainer());\n\t\t}, pixiContainer);\n\t\toverlay.addTo(map);\n\t\tsetPixiOverlay(overlay);\n\n\t\tsetOpenedPopupData(null);\n\t\tsetOpenedTooltipData(null);\n\n\t\treturn function () {\n\t\t\treturn pixiContainer.removeChildren();\n\t\t};\n\t}, [map]);\n\n\t// draw markers first time in new container\n\t(0, _react.useEffect)(function () {\n\t\tif (pixiOverlay && markers && loaded) {\n\t\t\tvar utils = pixiOverlay.utils;\n\t\t\tvar container = utils.getContainer();\n\t\t\tvar renderer = utils.getRenderer();\n\t\t\tvar project = utils.latLngToLayerPoint;\n\t\t\tvar scale = utils.getScale();\n\n\t\t\tmarkers.forEach(function (marker) {\n\t\t\t\tvar id = marker.id,\n\t\t\t\t    iconColor = marker.iconColor,\n\t\t\t\t    iconId = marker.iconId,\n\t\t\t\t    onClick = marker.onClick,\n\t\t\t\t    position = marker.position,\n\t\t\t\t    popup = marker.popup,\n\t\t\t\t    tooltip = marker.tooltip,\n\t\t\t\t    popupOpen = marker.popupOpen,\n\t\t\t\t    markerSpriteAnchor = marker.markerSpriteAnchor;\n\n\n\t\t\t\tvar resolvedIconId = iconId || iconColor;\n\n\t\t\t\tif (!PIXILoader.resources['marker_' + resolvedIconId] || !PIXILoader.resources['marker_' + resolvedIconId].texture) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar markerTexture = PIXILoader.resources['marker_' + resolvedIconId].texture;\n\t\t\t\t//const markerTexture = new PIXI.Texture.fromImage(url);\n\n\t\t\t\tmarkerTexture.anchor = { x: 0.5, y: 1 };\n\n\t\t\t\tvar markerSprite = PIXI.Sprite.from(markerTexture);\n\t\t\t\tif (markerSpriteAnchor) {\n\t\t\t\t\tmarkerSprite.anchor.set(markerSpriteAnchor[0], markerSpriteAnchor[1]);\n\t\t\t\t} else {\n\t\t\t\t\tmarkerSprite.anchor.set(0.5, 1);\n\t\t\t\t}\n\n\t\t\t\tvar markerCoords = project(position);\n\t\t\t\tmarkerSprite.x = markerCoords.x;\n\t\t\t\tmarkerSprite.y = markerCoords.y;\n\n\t\t\t\tmarkerSprite.scale.set(1 / scale);\n\n\t\t\t\tif (popupOpen) {\n\t\t\t\t\tsetOpenedPopupData({\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\toffset: [0, -35],\n\t\t\t\t\t\tposition: position,\n\t\t\t\t\t\tcontent: popup,\n\t\t\t\t\t\tonClick: onClick\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (popup || onClick || tooltip) {\n\t\t\t\t\tmarkerSprite.interactive = true;\n\t\t\t\t}\n\n\t\t\t\tif (popup || onClick) {\n\t\t\t\t\tmarkerSprite.on('click', function () {\n\t\t\t\t\t\tif (onClick) {\n\t\t\t\t\t\t\tonClick(id);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tmarkerSprite.defaultCursor = 'pointer';\n\t\t\t\t\tmarkerSprite.buttonMode = true;\n\t\t\t\t}\n\n\t\t\t\tif (tooltip) {\n\t\t\t\t\tmarkerSprite.on('mouseover', function () {\n\t\t\t\t\t\tsetOpenedTooltipData({\n\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\toffset: [0, -35],\n\t\t\t\t\t\t\tposition: position,\n\t\t\t\t\t\t\tcontent: tooltip\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tmarkerSprite.on('mouseout', function () {\n\t\t\t\t\t\tsetOpenedTooltipData(null);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tcontainer.addChild(markerSprite);\n\t\t\t});\n\n\t\t\trenderer.render(container);\n\t\t}\n\n\t\treturn function () {\n\t\t\treturn pixiOverlay && pixiOverlay.utils.getContainer().removeChildren();\n\t\t};\n\t}, [pixiOverlay, markers, loaded]);\n\n\t// handle tooltip\n\t(0, _react.useEffect)(function () {\n\t\tif (openedTooltip) {\n\t\t\tmap.closePopup(openedTooltip);\n\t\t}\n\n\t\tif (openedTooltipData && (!openedPopup || !openedPopupData || openedPopupData.id !== openedTooltipData.id)) {\n\t\t\tsetOpenedTooltip(openPopup(map, openedTooltipData));\n\t\t}\n\n\t\t// we don't want to reload when openedTooltip changes as we'd get a loop\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [openedTooltipData, openedPopupData, map]);\n\n\t// handle popup\n\t(0, _react.useEffect)(function () {\n\t\t// close only if different popup\n\t\tif (openedPopup) {\n\t\t\tmap.closePopup(openedPopup);\n\t\t}\n\n\t\t// open only if new popup\n\t\tif (openedPopupData) {\n\t\t\tsetOpenedPopup(openPopup(map, openedPopupData, { autoClose: false }, true));\n\t\t}\n\n\t\t// we don't want to reload when whenedPopup changes as we'd get a loop\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [openedPopupData, map]);\n\n\treturn null;\n};\n\nfunction openPopup(map, data) {\n\tvar extraOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\tvar isPopup = arguments[3];\n\n\tvar popup = _leaflet2.default.popup(Object.assign({ offset: data.offset }, extraOptions)).setLatLng(data.position).setContent(data.content).openOn(map);\n\n\t// TODO don't call onClick if opened a new one\n\tif (isPopup && data.onClick) {\n\t\tpopup.on('remove', function () {\n\t\t\tdata.onClick(null);\n\t\t});\n\t}\n\n\treturn popup;\n}\n\nfunction getDefaultIcon(color) {\n\tvar svgIcon = '<svg style=\"-webkit-filter: drop-shadow( 1px 1px 1px rgba(0, 0, 0, .4));filter: drop-shadow( 1px 1px 1px rgba(0, 0, 0, .4));\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"' + color + '\" width=\"36\" height=\"36\" viewBox=\"0 0 24 24\"><path d=\"M12 0c-4.198 0-8 3.403-8 7.602 0 6.243 6.377 6.903 8 16.398 1.623-9.495 8-10.155 8-16.398 0-4.199-3.801-7.602-8-7.602zm0 11c-1.657 0-3-1.343-3-3s1.342-3 3-3 3 1.343 3 3-1.343 3-3 3z\"/></svg>';\n\treturn getEncodedIcon(svgIcon);\n}\n\nfunction getEncodedIcon(svg) {\n\tvar decoded = unescape(encodeURIComponent(svg));\n\tvar base64 = btoa(decoded);\n\treturn 'data:image/svg+xml;base64,' + base64;\n}\n\nexports.default = PixiOverlay;"]},"metadata":{},"sourceType":"script"}