{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Weilin\\\\Documents\\\\GitHub\\\\OnlineUrnGame\\\\app\\\\client\\\\src\\\\js\\\\components\\\\CreateGame.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { useSelector, useDispatch, batch } from \"react-redux\";\nimport { createNewGame, updateOnlineStatus, joinGame, getNewGame, setAlias, setPlayer, setGameWaiting, setGameCreated } from \"../features/gameSlice\";\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nconst CreateGame = () => {\n  _s();\n\n  const dispatch = useDispatch(); // state\n\n  const gameState = useSelector(state => state.game);\n  console.log(gameState.game_waiting); // Get Open Games\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (gameState.game_waiting === true) {\n        batch(() => {\n          dispatch(getNewGame(\"/api/get/newgame\"));\n          dispatch(updateOnlineStatus('/api/get/updateonlinestatus?player=' + gameState.player));\n        });\n      } else {\n        dispatch(getNewGame(\"/api/get/newgame\"));\n      }\n    }, 2000);\n    return () => clearInterval(interval);\n  }, []); // create new game\n\n  function createNewGame() {\n    var alias = document.getElementById(\"alias\").value;\n\n    if (alias.length === 0) {\n      alert('Enter your alias first');\n      return;\n    }\n\n    var room;\n    var player1;\n    var player2;\n\n    if (gameState.game_waiting_data.length > 0) {\n      room = gameState.game_waiting_data[0]['room'];\n      player1 = gameState.game_waiting_data[0]['player1name'];\n      player2 = gameState.game_waiting_data[0]['player2name'];\n    }\n\n    var coin_toss = Math.floor(Math.random() * 2) === 0;\n    var player;\n\n    if (!player1 && !player2) {\n      if (coin_toss) {\n        player = 'player1';\n      } else {\n        player = 'player2';\n      }\n\n      batch(() => {\n        dispatch(getNewGame('/api/get/creategame?player=' + player + '&alias=' + alias));\n        dispatch(setAlias(alias));\n        dispatch(setPlayer(player));\n        dispatch(setGameWaiting(true));\n      });\n    } else if (player1.length > 0 && player2 === '') {\n      player = 'player2';\n      batch(() => {\n        dispatch(joinGame('/api/get/joinGame?player=' + player + '&alias=' + alias + '&room=' + room));\n        dispatch(setAlias(alias));\n        dispatch(setPlayer(player));\n        dispatch(setGameWaiting(true));\n      });\n    } else if (player1 === '' && player2.length > 0) {\n      player = 'player1';\n      batch(() => {\n        dispatch(joinGame('/api/get/joinGame?player=' + player + '&alias=' + alias + '&room=' + room));\n        dispatch(setAlias(alias));\n        dispatch(setPlayer(player));\n        dispatch(setGameWaiting(true));\n      });\n    }\n  } // render component\n\n\n  if (gameState.game_waiting === true) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Waiting for next player...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Room code: \", gameState.room]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"You are \", gameState.player]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Your alias: \", gameState.alias]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        id: \"alias\",\n        label: \"Enter Your Alias (Required)\",\n        variant: \"outlined\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: createNewGame,\n        children: \"Enter New Game\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this);\n  }\n};\n\n_s(CreateGame, \"i1uH8FnuNPTJtr7/vp43AmTUyTs=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = CreateGame;\nexport default CreateGame;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateGame\");","map":{"version":3,"sources":["C:/Users/Weilin/Documents/GitHub/OnlineUrnGame/app/client/src/js/components/CreateGame.js"],"names":["React","useEffect","useSelector","useDispatch","batch","createNewGame","updateOnlineStatus","joinGame","getNewGame","setAlias","setPlayer","setGameWaiting","setGameCreated","Button","TextField","CreateGame","dispatch","gameState","state","game","console","log","game_waiting","interval","setInterval","player","clearInterval","alias","document","getElementById","value","length","alert","room","player1","player2","game_waiting_data","coin_toss","Math","floor","random"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useSelector, useDispatch, batch } from \"react-redux\";\r\nimport { createNewGame, updateOnlineStatus, joinGame, getNewGame, setAlias, setPlayer, setGameWaiting, setGameCreated } from \"../features/gameSlice\";\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nconst CreateGame = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    // state\r\n    const gameState = useSelector(state => state.game);\r\n            console.log(gameState.game_waiting);\r\n\r\n    // Get Open Games\r\n    useEffect(() => {\r\n      const interval = setInterval(() => {\r\n\r\n        if (gameState.game_waiting === true) {\r\n            batch(() => {\r\n                dispatch(getNewGame(\"/api/get/newgame\"));\r\n                dispatch(updateOnlineStatus('/api/get/updateonlinestatus?player='+gameState.player));\r\n            });\r\n        } else {\r\n            dispatch(getNewGame(\"/api/get/newgame\"))\r\n        }\r\n      }, 2000);\r\n      return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    // create new game\r\n    function createNewGame() {\r\n        var alias = document.getElementById(\"alias\").value;\r\n        if (alias.length === 0) {alert('Enter your alias first'); return}\r\n        var room;\r\n        var player1;\r\n        var player2;\r\n\r\n        if (gameState.game_waiting_data.length>0) {\r\n            room = gameState.game_waiting_data[0]['room'];\r\n            player1 = gameState.game_waiting_data[0]['player1name'];\r\n            player2 = gameState.game_waiting_data[0]['player2name'];\r\n        }\r\n\r\n        var coin_toss = (Math.floor(Math.random() * 2) === 0);\r\n        var player;\r\n\r\n        if (!player1 && !player2) {\r\n            if (coin_toss) {player = 'player1'}\r\n            else {player = 'player2'}\r\n\r\n            batch(() => {\r\n                dispatch(getNewGame('/api/get/creategame?player='+player+'&alias='+alias));\r\n                dispatch(setAlias(alias));\r\n                dispatch(setPlayer(player));\r\n                dispatch(setGameWaiting(true));\r\n            });\r\n        } else if (player1.length > 0 && player2 === '') {\r\n            player = 'player2'\r\n\r\n            batch(() => {\r\n                dispatch(joinGame('/api/get/joinGame?player='+player+'&alias='+alias+'&room='+room));\r\n                dispatch(setAlias(alias));\r\n                dispatch(setPlayer(player));\r\n                dispatch(setGameWaiting(true));\r\n            });\r\n        } else if (player1 === '' && player2.length >0) {\r\n            player = 'player1'\r\n\r\n            batch(() => {\r\n                dispatch(joinGame('/api/get/joinGame?player='+player+'&alias='+alias+'&room='+room));\r\n                dispatch(setAlias(alias));\r\n                dispatch(setPlayer(player));\r\n                dispatch(setGameWaiting(true));\r\n            });\r\n        }\r\n    }\r\n\r\n    // render component\r\n    if (gameState.game_waiting === true) {\r\n        return (\r\n            <div>\r\n                <p>Waiting for next player...</p>\r\n                <p>Room code: {gameState.room}</p>\r\n                <p>You are {gameState.player}</p>\r\n                <p>Your alias: {gameState.alias}</p>\r\n            </div>\r\n        );\r\n    } else {\r\n        return(\r\n            <div>\r\n                <TextField id=\"alias\" label=\"Enter Your Alias (Required)\" variant=\"outlined\" />\r\n                <Button variant=\"contained\" color=\"primary\" onClick={createNewGame}>\r\n                    Enter New Game\r\n                </Button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CreateGame;"]},"metadata":{},"sourceType":"module"}